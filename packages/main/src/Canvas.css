.canvas {
  background: var(--canvas-bg);

  &.tool-edge, &.tool-edge * { cursor: crosshair !important; }
  &.tool-text, &.tool-text * { cursor: text !important; }
  &.tool-freehand, &.tool-freehand * { cursor: crosshair !important; }
  &.tool-pen, &.tool-pen * { cursor: default !important; }
  &.tool-node, &.tool-node * { cursor: default !important; }
  &.tool-pan, &.tool-pan * { cursor: move !important; }

  [contenteditable] {
    outline: 0 solid transparent;
    border-radius: 3px;

    &::selection, *::selection {
      background: rgba(175,210,255,0.5);
    }
    &::-moz-selection, *::-moz-selection {
      background: rgba(175,210,255,0.5);
    }
  }

  [contenteditable]:not(:focus) {
    border: none; /*1px dashed #ddd;*/
  }

  [contenteditable]:focus {
    border: 3px solid #51a7e8;
    background: rgba(255, 255, 255, 0.2);
    box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.075), 0 0 5px rgba(81, 167, 232, 0.5);
  }

  .svg-doc-bounds {
    fill: white;
    stroke: #1c1917;
    stroke-width: 1;
    filter: drop-shadow(2px 2px 4px rgba(27, 25, 23, 0.05));
  }

  .svg-grid {
    stroke-width: 1;
    /* TODO: Use color variables for these */
    &.svg-grid--minor {
      stroke: #f5f5f4;
      fill: #f5f5f4;
    }
    &.svg-grid--major {
      stroke: #e7e5e4;
      fill: #e7e5e4;
    }
  }

  .svg-selection {
    .svg-selection__bb {
      fill: none;
      stroke-width: 1;
      stroke: #1d4ed8;
      &.svg-selection__bb--only-edges {
        stroke: #a8a29e;
        stroke-dasharray: 5 5;
      }
      &.svg-selection__bb--dragging {
      }
    }

    .svg-selection__handle {
      fill: white;
      stroke-width: 1;
      stroke: #1d4ed8;
    }
    .svg-selection__handle-edge {
      fill: white;
      stroke-width: 1;
      stroke: #1d4ed8;
      cursor: move;
      &:hover,
      &.svg-selection__handle-edge--active {
        stroke-width: 2;
      }
      &.svg-selection__handle-edge--connected {
        stroke: #16a34a;
        fill: #16a34a;
      }
    }

    .svg-selection__label-node {
      fill: var(--canvas-bg);
      stroke-width: 1;
      stroke: purple;
      cursor: move;
      &:hover,
      &.svg-selection__label-node--active {
        stroke-width: 2;
      }
    }
    .svg-selection__label-node__line {
      stroke-width: 1;
      stroke: purple;
      stroke-dasharray: 5 5;
    }

    .svg-selection__group-bounds {
      fill: none;
      stroke-dasharray: 5 5;
      stroke: hsl(215, 63%, 70%);
    }
  }


  .svg-guide__line {
    stroke-width: 1;
  }
  .svg-guide__extension {
    stroke-width: 1;
    stroke-dasharray: 5 5;
  }
  .svg-guide__color--node {
    stroke: red;
  }
  .svg-guide__color--distance {
    stroke: pink;
  }
  .svg-guide__color--size {
    stroke: pink;
  }
  .svg-guide__color--canvas {
    stroke: green;
  }
  .svg-guide__color--source {
    stroke: black;
  }
  .svg-guide__color--grid {
    stroke: purple;
  }

  .svg-guide__distance-line {
    stroke: pink;
    fill: pink;
    stroke-width: 1;
  }
  .svg-guide__distance-label-bg {
    fill: white;
  }
  .svg-guide__distance-label {
    fill: pink;
    font-size: 10px;
    dominant-baseline: middle;
    text-anchor: middle;
  }

  .svg-marquee {
    fill: rgba(43, 117, 221, 0.2);
    stroke: #2673dd;
  }
  .svg-marquee__element {
    fill: transparent;
    stroke: #2673dd;
  }

  .svg-bezier-handle {
    fill: white;
    stroke-width: 1;
    stroke: darkorange;
    cursor: move
  }
  .svg-bezier-handle-line {
    stroke-width: 1;
    stroke: darkorange;
    stroke-dasharray: 2 2;
    cursor: move;
  }

  .svg-waypoint-handle {
    fill: white;
    cursor: move;
    stroke-width: 1;
    stroke: #1d4ed8;
  }

  .svg-midpoint-handle {
    fill: white;
    cursor: move;
    stroke-width: 1;
    stroke: #9DBCFA;
  }

  /* This is for mixed foreignObject svg text situations */
  .svg-node__fo--with-text {
    &:has(*[contenteditable="true"]) {
      & > div {
        visibility: visible;
      }
    }
  }
  .svg-node__fo--with-text:has(*[contenteditable="true"]) + text {
    fill: transparent !important;
    stroke: transparent !important;
    tspan {
      fill: transparent !important;
      stroke: transparent !important;
    }
  }

  .svg-node--highlight-node__tool-edit {
    outline: 1px solid green;
  }
  .svg-node--highlight-node__tool-convert {
    outline: 1px solid red;
  }
  .svg-edge {
    cursor: move;
    fill: none;
  }
  .svg-edge--highlight-node__drop-target {
    .svg-edge {
      stroke: #30A46C !important;
      stroke-width: 3 !important;
      stroke-dasharray: none !important;
    }
  }
  .svg-shape-control-point {
    cursor: crosshair;
    fill: white;
    stroke: #16a34a;
    stroke-width: 2;
  }

  .svg-anchor-handle {
    fill: white;
    stroke: #16a34a;
    &:hover {
      stroke: red;
    }
  }
}